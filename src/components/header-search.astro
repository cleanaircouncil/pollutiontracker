---
import Button from "./button.astro";
import PanelStack from "./panel-stack.astro";
import Search from "./search.astro";
---

<PanelStack class="header__search | overflow-hidden" data-search-panel>
  <Search />
  <section class="form-controls">
    <Button class="box-shadow" href="#">
      <i class="fa fa-chevron-left"></i> Back To Results
    </Button>
  </section>
</PanelStack>

<style>
  .header__search {
    margin-block: -1rem;
    margin-bottom: -2rem;
    margin-inline: -0.5rem;
    width: calc(100% + 1rem);
    padding-block: 1rem;
  }
</style>


<script>
  import { currentFacilitySlug } from "../helpers/store";

  const searchPanelEl = document.querySelector("[data-search-panel]");

  currentFacilitySlug.subscribe(async (slug) => {
    const view = slug ? "right" : "left";
    searchPanelEl.setAttribute("data-view", view);
  });
</script>
